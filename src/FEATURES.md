# 志愿者服务系统 - 功能清单

## ✅ 已实现功能

### 1. 用户认证系统
- ✅ 用户注册（邮箱 + 密码）
- ✅ 用户登录
- ✅ 自动登录（Session 保持）
- ✅ 退出登录
- ✅ Supabase Auth 集成

### 2. "我的"个人中心
- ✅ 个人信息管理
  - 查看个人资料
  - 编辑姓名、电话、个人简介
  - 邮箱不可修改
  
- ✅ 志愿时长统计
  - 总志愿时长显示
  - 参与活动次数
  - 会员等级系统（新手/铜牌/银牌/金牌）
  
- ✅ 我的报名管理
  - 查看所有报名记录
  - 按状态筛选（全部/待审核/已通过/已完成/已取消）
  - 查看志愿时长记录
  - 取消报名（仅待审核状态）

### 3. 志愿机会浏览（前台）
- ✅ 首页展示精选机会
- ✅ 浏览所有志愿机会
- ✅ 搜索功能
- ✅ 分类筛选
- ✅ 机会详情查看
- ✅ 在线报名

### 4. 后台管理系统

#### 4.1 仪表板
- ✅ 实时统计数据
  - 志愿机会总数
  - 报名总数  
  - 注册用户总数
  - 名额统计
  - 总志愿时长
- ✅ 最新机会列表
- ✅ 最新报名记录

#### 4.2 志愿活动管理
- ✅ 创建新活动
- ✅ 编辑活动信息
- ✅ 删除活动
- ✅ 查看活动列表
- ✅ 活动详情管理
  - 标题、组织、分类
  - 地点、日期、时长
  - 名额管理
  - 描述和要求
  - 图片和标签

#### 4.3 报名记录管理
- ✅ 查看所有报名
- ✅ 搜索报名记录
- ✅ 按活动筛选
- ✅ 更新报名状态
  - 待审核
  - 已通过
  - 已完成
  - 已取消
- ✅ 录入志愿时长
- ✅ 取消报名
- ✅ 自动恢复名额

#### 4.4 志愿者信息管理
- ✅ 查看所有志愿者
- ✅ 搜索志愿者
- ✅ 查看志愿者详情
  - 基本信息
  - 志愿时长
  - 参与活动次数
  - 会员等级
- ✅ 编辑志愿者数据
  - 手动调整志愿时长
  - 手动调整参与次数

### 5. 数据库集成
- ✅ Supabase PostgreSQL
- ✅ 键值存储（KV Store）
- ✅ 实时数据同步
- ✅ 数据持久化

### 6. 特色功能
- ✅ 响应式设计（支持桌面/平板/手机）
- ✅ 实时名额更新
- ✅ 自动计算志愿时长
- ✅ 会员等级系统
- ✅ 多状态工作流

## 🎯 数据流程

### 用户注册流程
1. 填写注册表单（姓名、邮箱、密码、电话）
2. 后端调用 Supabase Auth 创建账户
3. 创建用户资料记录
4. 自动登录并跳转

### 志愿报名流程
1. 用户浏览志愿机会
2. 查看详情并填写报名表单
3. 提交报名→创建报名记录
4. 自动减少可用名额
5. 用户活动次数+1

### 完成志愿活动流程
1. 管理员在后台找到报名记录
2. 点击编辑，选择"已完成"
3. 输入实际志愿时长
4. 保存→自动更新用户总志愿时长
5. 用户在个人中心看到更新

## 📊 数据结构

### Opportunity (志愿机会)
```
- id: 唯一标识
- title: 标题
- organization: 组织
- category: 分类
- location: 地点
- date: 日期
- duration: 时长
- spotsAvailable: 可用名额
- totalSpots: 总名额
- description: 描述
- requirements: 要求数组
- image: 图片URL
- tags: 标签数组
- createdAt: 创建时间
```

### Registration (报名记录)
```
- id: 唯一标识
- opportunityId: 关联活动ID
- userId: 用户ID
- name: 姓名
- email: 邮箱
- phone: 电话
- message: 留言
- status: 状态（pending/approved/completed/cancelled）
- registeredAt: 报名时间
- completedAt: 完成时间
- volunteeredHours: 志愿时长
```

### UserProfile (用户资料)
```
- userId: 用户ID
- name: 姓名
- email: 邮箱
- phone: 电话
- avatar: 头像URL
- bio: 个人简介
- totalHours: 总志愿时长
- totalActivities: 参与活动次数
- createdAt: 注册时间
- updatedAt: 更新时间
```

## 🔑 访问方式

### 前台用户
1. 访问首页
2. 点击"登录"或"注册"
3. 注册/登录后可报名活动
4. 点击右上角头像进入"我的"

### 管理员
1. 点击导航栏"管理后台"
2. 使用管理员账号登录
   - 用户名: admin
   - 密码: admin123
3. 进入后台管理系统

## 🎨 会员等级

- 新手志愿者: 0-9 小时
- 铜牌志愿者: 10-49 小时
- 银牌志愿者: 50-99 小时
- 金牌志愿者: 100+ 小时

## 💡 使用场景

1. **志愿者**
   - 注册账号
   - 浏览并报名感兴趣的活动
   - 查看个人志愿记录
   - 追踪志愿时长和等级

2. **管理员**
   - 发布新的志愿活动
   - 审核报名申请
   - 管理活动名额
   - 记录志愿者时长
   - 查看统计数据
   - 管理志愿者信息

## 🚀 技术栈

- **前端**: React + TypeScript + Tailwind CSS
- **后端**: Supabase Edge Functions (Deno + Hono)
- **数据库**: Supabase PostgreSQL + KV Store
- **认证**: Supabase Auth
- **部署**: Figma Make 环境

## ⚠️ 注意事项

1. 系统使用 Supabase Auth，邮箱自动确认（未配置邮件服务器）
2. Figma Make 不适合存储敏感个人信息，仅用于原型演示
3. 管理员账号为演示账号，生产环境需更安全的认证
4. 所有数据存储在 Supabase，服务器重启后数据保留
