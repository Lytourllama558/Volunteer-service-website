# 志愿者服务系统

一个功能完整的志愿者服务管理平台，包含用户端和管理端，支持用户注册、志愿活动报名、志愿时长追踪和完整的后台管理功能。

## 🌟 系统特点

- ✅ **完整的用户认证系统** - 注册、登录、个人中心
- ✅ **志愿活动管理** - 浏览、搜索、筛选、报名
- ✅ **个人中心** - 志愿时长、报名记录、个人信息
- ✅ **会员等级系统** - 根据志愿时长自动升级
- ✅ **强大的后台管理** - 活动管理、报名审核、志愿者管理
- ✅ **实时数据同步** - Supabase 数据库支持
- ✅ **响应式设计** - 完美支持桌面、平板、手机

## 📱 用户端功能

### 1. 首页
- 精选志愿活动展示
- 平台统计数据（活跃志愿者、活动数量、贡献时长等）
- 志愿流程介绍

### 2. 浏览志愿活动
- 搜索功能
- 分类筛选（环境保护、社区服务、教育、动物关怀、老年关怀等）
- 查看详细信息
- 在线报名

### 3. 个人中心（需登录）
- **个人信息管理**
  - 查看和编辑个人资料
  - 上传头像
  - 编辑个人简介

- **志愿时长统计**
  - 总志愿时长
  - 参与活动次数
  - 会员等级（新手/铜牌/银牌/金牌）

- **我的报名**
  - 查看所有报名记录
  - 按状态筛选（待审核/已通过/已完成/已取消）
  - 查看志愿时长
  - 取消报名（待审核状态）

## 🔧 管理端功能

### 访问方式
- 点击导航栏"管理后台"
- 使用管理员账号登录
  - 用户名: `admin`
  - 密码: `admin123`

### 1. 仪表板
- 实时统计数据
- 最新志愿活动
- 最新报名记录
- 数据可视化

### 2. 志愿活动管理
- ➕ 发布新的志愿活动
- ✏️ 编辑活动信息
- 🗑️ 删除活动
- 📋 查看活动列表
- 📊 名额管理

**可管理的字段：**
- 活动标题
- 组织名称
- 分类
- 地点和日期
- 时长
- 名额（可用/总数）
- 活动描述
- 参与要求
- 图片URL
- 标签

### 3. 报名记录管理
- 查看所有报名
- 搜索和筛选
- 更新报名状态
  - 待审核 → 已通过
  - 已通过 → 已完成（录入志愿时长）
  - 取消报名
- 查看志愿者联系方式

### 4. 志愿者信息管理
- 查看所有注册志愿者
- 搜索志愿者
- 查看志愿者详情
  - 基本信息
  - 志愿时长
  - 参与活动次数
  - 会员等级
- 手动调整志愿者数据
  - 修改志愿时长
  - 修改参与次数

## 🎯 使用流程

### 志愿者使用流程

1. **注册账号**
   - 填写姓名、邮箱、手机号、密码
   - 系统自动创建用户资料

2. **浏览活动**
   - 在首页查看精选活动
   - 点击"浏览志愿活动"查看所有活动
   - 使用搜索和筛选找到感兴趣的活动

3. **报名参加**
   - 点击活动查看详情
   - 填写报名表单
   - 提交报名（自动减少名额）

4. **查看记录**
   - 登录后点击"我的"进入个人中心
   - 查看报名状态
   - 查看累计志愿时长和等级

### 管理员使用流程

1. **登录后台**
   - 点击"管理后台"
   - 使用管理员账号登录

2. **发布活动**
   - 进入"志愿活动"模块
   - 点击"添加新活动"
   - 填写完整信息并发布

3. **审核报名**
   - 进入"报名记录"模块
   - 查看新的报名
   - 点击编辑更新状态为"已通过"

4. **记录时长**
   - 活动结束后，找到对应报名记录
   - 点击编辑，状态改为"已完成"
   - 输入实际志愿时长
   - 保存后自动更新志愿者总时长

5. **管理志愿者**
   - 进入"志愿者管理"模块
   - 查看所有志愿者信息
   - 可手动调整数据

## 💾 数据库架构

### Activity (志愿活动)
- 活动基本信息
- 名额管理
- 时间和地点
- 描述和要求

### Registration (报名记录)
- 关联志愿者和活动
- 报名状态追踪
- 志愿时长记录

### UserProfile (用户资料)
- 基本信息
- 统计数据（时长、次数）
- 个人简介

## 🎨 会员等级

根据累计志愿时长自动升级：

- 🌱 **新手志愿者**: 0-9 小时
- 🥉 **铜牌志愿者**: 10-49 小时
- 🥈 **银牌志愿者**: 50-99 小时
- 🥇 **金牌志愿者**: 100+ 小时

## 🔄 数据流程

### 报名流程
```
用户报名 → 创建报名记录 → 名额-1 → 活动次数+1
```

### 完成流程
```
管理员标记完成 → 录入时长 → 用户总时长更新 → 等级自动升级
```

### 取消流程
```
取消报名 → 删除记录 → 名额+1 → 活动次数-1
```

## 🛠️ 技术栈

- **前端**: React 18 + TypeScript
- **样式**: Tailwind CSS v4.0
- **后端**: Supabase Edge Functions (Deno + Hono)
- **数据库**: Supabase PostgreSQL + KV Store
- **认证**: Supabase Auth
- **图标**: Lucide React

## 📦 项目结构

```
/
├── components/
│   ├── Admin/              # 管理后台组件
│   │   ├── AdminDashboard.tsx
│   │   ├── AdminLogin.tsx
│   │   ├── AdminStats.tsx
│   │   ├── OpportunityManagement.tsx
│   │   ├── RegistrationManagement.tsx
│   │   └── VolunteerManagement.tsx
│   ├── Auth/               # 用户认证组件
│   │   ├── AuthModal.tsx
│   │   ├── LoginForm.tsx
│   │   └── RegisterForm.tsx
│   ├── Profile/            # 个人中心组件
│   │   ├── ProfilePage.tsx
│   │   ├── ProfileInfo.tsx
│   │   └── MyRegistrations.tsx
│   ├── Navigation.tsx      # 导航栏
│   ├── Hero.tsx           # 首页横幅
│   ├── Stats.tsx          # 统计数据
│   ├── OpportunityCard.tsx
│   ├── OpportunityDetail.tsx
│   └── ...
├── supabase/
│   └── functions/
│       └── server/
│           ├── index.tsx   # 主服务器
│           └── auth.tsx    # 认证模块
├── services/
│   └── api.ts             # API 调用层
├── hooks/
│   └── useOpportunities.ts
└── App.tsx                # 主应用
```

## ⚙️ API 端点

### 认证
- `POST /auth/register` - 用户注册
- `GET /auth/profile` - 获取用户资料
- `PUT /auth/profile` - 更新用户资料

### 志愿活动
- `GET /opportunities` - 获取所有志愿活动
- `GET /opportunities/:id` - 获取单个志愿活动
- `POST /opportunities` - 创建志愿活动
- `PUT /opportunities/:id` - 更新志愿活动
- `DELETE /opportunities/:id` - 删除志愿活动

### 报名
- `POST /registrations` - 提交报名
- `GET /registrations` - 获取所有报名
- `GET /user/registrations` - 获取用户的报名
- `PUT /registrations/:id` - 更新报名状态
- `DELETE /registrations/:id` - 取消报名

### 管理员
- `GET /admin/users` - 获取所有用户
- `PUT /admin/users/:id` - 更新用户信息
- `GET /stats` - 获取统计数据

## 🚀 快速开始

### 用户端
1. 访问网站首页
2. 点击"注册"创建账号
3. 浏览并报名感兴趣的志愿活动
4. 在"我的"查看个人信息和报名记录

### 管理端
1. 点击"管理后台"
2. 使用 `admin` / `admin123` 登录
3. 在仪表板查看系统概况
4. 管理活动、报名和志愿者

## ⚠️ 注意事项

1. **邮箱确认**: 由于未配置邮件服务器，注册时邮箱自动确认
2. **数据安全**: Figma Make 环境仅用于原型演示，不适合存储敏感个人信息
3. **管理员账号**: 演示账号，生产环境需更安全的认证机制
4. **数据持久化**: 所有数据存储在 Supabase，服务器重启后数据保留

## 📝 数据初始化

系统启动时会自动初始化6个示例志愿活动：
- 社区花园清洁
- 食物银行分发
- 老年中心活动
- 海滩清洁活动
- 青少年辅导项目
- 动物收容所支持

## 🎓 学习资源

- [React 文档](https://react.dev)
- [Tailwind CSS](https://tailwindcss.com)
- [Supabase 文档](https://supabase.com/docs)
- [Lucide Icons](https://lucide.dev)

## 📄 许可证

版权所有 © 2025 志愿者之家。保留所有权利。

---

**开始使用志愿者服务系统，让爱心传递，让世界更美好！** ❤️
